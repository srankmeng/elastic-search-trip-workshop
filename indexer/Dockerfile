FROM python:3.11.2-slim
WORKDIR /app
RUN mkdir -p /app/data
ADD . /app
ADD ./data /app/data

ENV OPENSEARCH_USERNAME=$OPENSEARCH_USERNAME
ENV OPENSEARCH_PASSWORD=$OPENSEARCH_PASSWORD
ENV OPENSEARCH_INDEX_NAME=$OPENSEARCH_INDEX_NAME
ENV OPENSEARCH_PORT=$OPENSEARCH_PORT
ENV OPENSEARCH_HOST=opensearch-node1

RUN pip install -r requirements.txt
CMD [ "python", "indexer.py"]